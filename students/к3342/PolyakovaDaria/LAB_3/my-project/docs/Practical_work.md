# Практическая работа №3.1. Django Web framework. Запросы и их выполнение

**Практическое задание 1:**
Напишите запрос на создание 6-7 новых автовладельцев и 5-6 автомобилей, каждому автовладельцу назначьте удостоверение и от 1 до 3 автомобилей. Задание можете выполнить либо в интерактивном режиме интерпретатора, либо в отдельном python-файле. Результатом должны стать запросы и отображение созданных объектов. 
Если вы добавляете автомобили владельцу через метод .add(), не забудьте заполнить также ассоциативную сущность “владение”.

**Выполнение задания:**

## Настройка окружения
1) Для начала я перешла в директорию, где находится manage.py: 
```
cd /Users/dariapolyakova/PycharmProjects/Daria_Django/django_project_poliakova
```
2) Далее активировала виртуальное окружение: 
```
source /Users/dariapolyakova/PycharmProjects/Daria_Django/tutorial-env/bin/activate
```
3) Запустила команду для открытия Django shell: 
```
python manage.py shell
```
## Работа в shell
1) Импортируем модули
```
from project_first_app.models import CarOwner, Car, Ownership, DriversLicense
```
2) Посмотрим какие username есть сейчас в нашей бд
![Photo](images/1.png)
3) Создадим 6 новых автовладельцев при помощи запросов 
![Photo](images/2.png)
4) Проверим добавились ли наши юзеры
![Photo](images/3.png)
5) Посмотрим какие есть сейчас машины в бд 
![Photo](images/4.png)
6) Добавим новых 5 машин через запросы
![Photo](images/5.png)
7) Проверим добавились ли они
![Photo](images/6.png)
8) Посмотрим какие есть лицензии в моей бд
![Photo](images/7.png)
9) И понимаем, что пока что ни родной лицензии нет. Каждому автовладельцу назначим удостоверение
![Photo](images/8.png)
10) Проверим бд удостоверений
![Photo](images/9.png)
11) Теперь присвоим авто юзерам
![Photo](images/10.png)
12) Теперь владения авто выглядит так:
![Photo](images/11.png)

**Практическое задание 2:**
По созданным в пр.1 данным написать следующие запросы на фильтрацию:

- Где это необходимо, добавьте `related_name` к полям модели
- Выведите все машины марки "Toyota" (или любой другой марки, которая у вас есть)
- Найти всех водителей с именем "Олег" (или любым другим именем на ваше усмотрение)
- Взяв любого случайного владельца, получить его `id`, и по этому `id` получить экземпляр удостоверения в виде объекта модели (можно в 2 запроса)
- Вывести всех владельцев красных машин (или любого другого цвета, который у вас присутствует)
- Найти всех владельцев, чей год владения машиной начинается с 2010 (или любой другой год, который присутствует у вас в базе)

**Выполнение задания:**

1) Выведете все машины марки “Toyota” (или любой другой марки, которая у вас есть):
![Photo](images/12.png)
2) Найти всех водителей с именем “Олег” (или любым другим именем на ваше усмотрение):
![Photo](images/13.png)
3) Взяв любого случайного владельца получить его id, и по этому id получить экземпляр удостоверения в виде объекта модели (можно в 2 запроса):
![Photo](images/14.png)
4) Вывести всех владельцев красных машин (или любого другого цвета, который у вас присутствует):
![Photo](images/15.png)
5) Найти всех владельцев, чей год владения машиной начинается с 2010 (или любой другой год, который присутствует у вас в базе):
![Photo](images/16.png)

**Практическое задание 3:**

Необходимо реализовать следующие запросы с применением описанных методов:

- Вывод даты выдачи самого старшего водительского удостоверения
- Укажите самую позднюю дату владения машиной, имеющую какую-то из существующих моделей в вашей базе
- Выведите количество машин для каждого водителя
- Подсчитайте количество машин каждой марки
- Отсортируйте всех автовладельцев по дате выдачи удостоверения  
  (Примечание: чтобы не выводить несколько раз одни и те же таблицы воспользуйтесь методом `.distinct()`)

**Выполнение задания:**

1) Вывод даты выдачи самого старшего водительского удостоверения
![Photo](images/17.png)
2) Укажите самую позднюю дату владения машиной, имеющую какую-то из существующих моделей в вашей базе
![Photo](images/18.png)
3) Выведите количество машин для каждого водителя
![Photo](images/19.png)
4) Подсчитайте количество машин каждой марки
![Photo](images/20.png)
5) Отсортируйте всех автовладельцев по дате выдачи удостоверения (Примечание: чтобы не выводить несколько раз одни и те же таблицы воспользуйтесь методом .distinct()).
Для выполнения этого пункта я добавила related_name='licenses' в класс DriversLicense(models.Model).
![Photo](images/21.png)
